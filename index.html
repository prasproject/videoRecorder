<!DOCTYPE html>
<html>
<head>
  <title>Record dan Play Video</title>
  <link rel="stylesheet" href="https://videojs.com/videojs.css">
  <script src="https://videojs.com/video.js"></script>
</head>
<body>
  <div id="video-container"></div>

  <script>
    const videoContainer = document.getElementById('video-container');

    const videoPlayer = videojs(videoContainer, {
      controls: true,
      autoplay: false,
      width: 640,
      height: 360,
    });

    // Memeriksa dukungan untuk record video
    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
      // Mendapatkan akses ke media kamera dan mikrofon
      navigator.mediaDevices.getUserMedia({ video: true, audio: true })
        .then(stream => {
          // Mengatur source video player dengan stream
          videoPlayer.srcObject = stream;

          // Menambahkan tombol record
          const recordButton = document.createElement('button');
          recordButton.textContent = 'Record';
          recordButton.addEventListener('click', () => {
            // Memulai perekaman video
            if (videoPlayer.recorder) {
              videoPlayer.recorder.stopRecording();
              recordButton.textContent = 'Record';
            } else {
              videoPlayer.recorder = new MediaRecorder(stream);
              videoPlayer.recorder.start();
              recordButton.textContent = 'Stop';
            }
          });
          videoContainer.appendChild(recordButton);

          // Menambahkan tombol play
          const playButton = document.createElement('button');
          playButton.textContent = 'Play';
          playButton.disabled = true;
          playButton.addEventListener('click', () => {
            // Memutar video yang direkam
            const videoBlob = videoPlayer.recorder.stopRecording();
            const videoUrl = URL.createObjectURL(videoBlob);
            videoPlayer.src = videoUrl;
            playButton.disabled = false;
          });
          videoContainer.appendChild(playButton);
        })
        .catch(error => {
          console.error('Gagal mendapatkan akses media:', error);
        });
    } else {
      console.error('Browser Anda tidak mendukung record video.');
    }
  </script>
</body>
</html>
